<div *ngIf="!radarDevice" style="display: flex; justify-content: center; align-items: center; background: white;">
    <mat-spinner [diameter]="60"></mat-spinner>
</div>

<div *ngIf="radarDevice">
    <h2>{{radarDevice.name}}</h2>
    <div style="float: left; margin-right: 50px;">
        <table class="radar-info-table" >
            <tr>
                <td><mat-label mat-basic-chip>Device Info:</mat-label></td>
                <td></td>
            </tr>
            <tr>
                <td>Device ID: </td>
                <td>{{radarDevice.device_id}}</td>
            </tr>
            <tr>
                <td>State: </td>
                <td>{{radarDevice.state}}</td>
            </tr>
            <tr>
                <td>Enabled: </td>
                <td>{{radarDevice.enabled}}</td>
            </tr>
            <tr>
                <td>Description: </td>
                <td>{{radarDevice.description}}</td>
            </tr>
        </table>
        <p>
            <button mat-raised-button *ngIf="!radarDevice.enabled" (click)="enableRadarDevice()" color="primary">Enable Radar</button>
            <button mat-raised-button *ngIf="radarDevice.enabled" (click)="disableRadarDevice()" color="primary">Disable Radar</button>
        </p>
    </div>

    <table class="radar-info-table" *ngIf="radarDevice.device_mapping != null">
        <tr>
            <td><mat-label mat-basic-chip>Device Mapping:</mat-label></td>
            <td></td>
        </tr>
        <tr>
            <td>IP Address:</td>
            <td>{{radarDevice.device_mapping.ip}}</td>
        </tr>
        <tr>
            <td>Subnet Mask:</td>
            <td>{{radarDevice.device_mapping.subnet}}</td>
        </tr>
        <tr>
            <td>Gateway:</td>
            <td>{{radarDevice.device_mapping.gateway}}</td>
        </tr>
        <tr>
            <td>Model:</td>
            <td>{{radarDevice.device_mapping.model}}</td>
        </tr>
        <tr>
            <td>Application:</td>
            <td>{{radarDevice.device_mapping.application}}</td>
        </tr>
        <tr>
            <td>Static IP:</td>
            <td>{{radarDevice.device_mapping.static_ip}}</td>
        </tr>
    </table>
    <br>
    <div class="radar-info-card" *ngIf="radarDevice.radar_settings != null">
        <p><mat-label mat-basic-chip>Radar Settings</mat-label></p>
        <mat-divider></mat-divider>
        <div *ngIf="radarDevice.radar_settings.sensor_position != null" class="radar-setting-div" style="float: left; margin-right: 50px;">
            <p><mat-label mat-basic-chip>Sensor Position</mat-label></p>
            <table class="radar-setting-table">
                <thead>
                    <tr>
                        <th>Height</th>
                        <th>Azimuth Tilt</th>
                        <th>Elevation Tilt</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{radarDevice.radar_settings.sensor_position.height}}m</td>
                        <td>{{radarDevice.radar_settings.sensor_position.azimuth_tilt}} deg</td>
                        <td>{{radarDevice.radar_settings.sensor_position.elevation_tilt}} deg</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="radarDevice.radar_settings.boundary_box != null" class="radar-setting-div">
            <p><mat-label mat-basic-chip>Boundary Box</mat-label></p>
            <table class="radar-setting-table">
                <thead>
                    <tr>
                        <th>X Min</th>
                        <th>X Max</th>
                        <th>Y Min</th>
                        <th>Y Max</th>
                        <th>Z Min</th>
                        <th>Z Max</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{radarDevice.radar_settings.boundary_box.x_min}}m</td>
                        <td>{{radarDevice.radar_settings.boundary_box.x_max}}m</td>
                        <td>{{radarDevice.radar_settings.boundary_box.y_min}}m</td>
                        <td>{{radarDevice.radar_settings.boundary_box.y_max}}m</td>
                        <td>{{radarDevice.radar_settings.boundary_box.z_min}}m</td>
                        <td>{{radarDevice.radar_settings.boundary_box.z_max}}m</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="radarDevice.radar_settings.static_boundary_box != null" class="radar-setting-div" style="float: left; margin-right: 50px;">
            <p><mat-label mat-basic-chip>Static Boundary Box</mat-label></p>
            <table class="radar-setting-table">
                <thead>
                    <tr>
                        <th>X Min</th>
                        <th>X Max</th>
                        <th>Y Min</th>
                        <th>Y Max</th>
                        <th>Z Min</th>
                        <th>Z Max</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{radarDevice.radar_settings.static_boundary_box.x_min}}m</td>
                        <td>{{radarDevice.radar_settings.static_boundary_box.x_max}}m</td>
                        <td>{{radarDevice.radar_settings.static_boundary_box.y_min}}m</td>
                        <td>{{radarDevice.radar_settings.static_boundary_box.y_max}}m</td>
                        <td>{{radarDevice.radar_settings.static_boundary_box.z_min}}m</td>
                        <td>{{radarDevice.radar_settings.static_boundary_box.z_max}}m</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="radarDevice.radar_settings.presence_boundary_box != null" class="radar-setting-div">
            <p><mat-label mat-basic-chip>Presence Boundary Box</mat-label></p>
            <table class="radar-setting-table">
                <thead>
                    <tr>
                        <th>X Min</th>
                        <th>X Max</th>
                        <th>Y Min</th>
                        <th>Y Max</th>
                        <th>Z Min</th>
                        <th>Z Max</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{radarDevice.radar_settings.presence_boundary_box.x_min}}m</td>
                        <td>{{radarDevice.radar_settings.presence_boundary_box.x_max}}m</td>
                        <td>{{radarDevice.radar_settings.presence_boundary_box.y_min}}m</td>
                        <td>{{radarDevice.radar_settings.presence_boundary_box.y_max}}m</td>
                        <td>{{radarDevice.radar_settings.presence_boundary_box.z_min}}m</td>
                        <td>{{radarDevice.radar_settings.presence_boundary_box.z_max}}m</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="radarDevice.radar_settings.allocation_params != null" class="radar-setting-div">
            <p><mat-label mat-basic-chip>Allocation Parameters</mat-label></p>
            <table class="radar-setting-table">
                <thead>
                    <tr>
                        <th>SNR Threshold</th>
                        <th>SNR Threshold Obscured</th>
                        <th>Velocity Threshold</th>
                        <th>Points Threshold</th>
                        <th>Max Distance Threshold</th>
                        <th>Max Velocity Threshold</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{radarDevice.radar_settings.allocation_params.snr_threshold}}</td>
                        <td>{{radarDevice.radar_settings.allocation_params.snr_threshold_obscured}}</td>
                        <td>{{radarDevice.radar_settings.allocation_params.velocity_threshold}} m/s</td>
                        <td>{{radarDevice.radar_settings.allocation_params.points_threshold}} points</td>
                        <td>{{radarDevice.radar_settings.allocation_params.max_distance_threshold}} mÂ²</td>
                        <td>{{radarDevice.radar_settings.allocation_params.max_velocity_threshold}} m/s</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div *ngIf="radarDevice.radar_settings.gating_params != null" class="radar-setting-div">
            <p><mat-label mat-basic-chip>Gating Parameters</mat-label></p>
            <table class="radar-setting-table">
                <thead>
                    <tr>
                        <th>Gain</th>
                        <th>Limit Width</th>
                        <th>Limit Depth</th>
                        <th>Limit Height</th>
                        <th>Limit Velocity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{radarDevice.radar_settings.gating_params.gain}}</td>
                        <td>{{radarDevice.radar_settings.gating_params.limit_width}}m</td>
                        <td>{{radarDevice.radar_settings.gating_params.limit_depth}}m</td>
                        <td>{{radarDevice.radar_settings.gating_params.limit_height}}m</td>
                        <td>{{radarDevice.radar_settings.gating_params.limit_velocity}} m/s</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br>
    </div>
    <br>
</div>


